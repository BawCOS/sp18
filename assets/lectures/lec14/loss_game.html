<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The Loss Game</title>
  <meta name="description" content="Computing the Loss">
  <meta name="author" content="Prof Gonzalez">

<style>

#box {
    background-color: red;
    width: 50px;
    height: 50px;
}

#lossPlot {
    width: 300px;
    height: 50px;
    text-align: center;

}

</style>

</head>

<body>
  
    <h1>The Loss Game</h1>
    The goal of this game is to move the sliders to minimize the loss.  The loss is depicted by the red rectangle.
    
    <div id="game">
        <h2> The Loss </h2>

        <div id="lossPlot">
            <div id="box">
            </div>
        </div>

        <div id="knobs">
            <h2> Parameter 1 </h2>
            <input type="range" min="1" max="100" value="50" id="var1">
            <h2> Parameter 2 </h2>
            <input type="range" min="1" max="100" value="50" id="var2">
            <h2> Parameter 3 </h2>
            <input type="range" min="1" max="100" value="50" id="var3">
        </div>
        <h1 id="winner"></h1>
        <p>
            Notice that to minimize the loss (red box) you move the above sliders in the direction that makes the box smaller.  This direction is the negative of the gradient.  In practice, experts at this game might move each slider to its minimum and then move the next slider.  This procedure is actually called coordinate descent and is another commonly used algorithm for minimizing the loss.
        </p>
        <p>
            Professor Gonzalez is bad at web design so if you want to make this game the award winning game it should be please send us a pull request: <a href="https://github.com/DS-100/sp18/blob/gh-pages/assets/lectures/lec14/loss_game.html"> Github Link</a>.
        </p>
    </div>

<script>


var box = document.getElementById("box");
var slider1 = document.getElementById("var1");
var slider2 = document.getElementById("var2");
var slider3 = document.getElementById("var3");
var win = document.getElementById("winner");
var hasWon = false;

function update_figure() {
    if (!hasWon) {
        var x1 = slider1.value
        var x2 = slider2.value
        var x3 = slider3.value
        var y = Math.sqrt(Math.pow((x1 - 20),2) + 2 * Math.pow((x2 - 70),2) + 4 * Math.pow((x3 - 42),2))
        box.style.width = y + "px"
        if (y < 2.0) {
            win.innerHTML = "You Win!"
            hasWon = true;
        }    
    }
}

// Update the current slider value (each time you drag the slider handle)
slider1.oninput = function() {
    update_figure()
}
slider2.oninput = function() {
    update_figure()
}
slider3.oninput = function() {
    update_figure()
}

</script> 


</body>
</html>